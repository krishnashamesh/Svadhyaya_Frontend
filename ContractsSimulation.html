<!DOCTYPE html>
<html>

<head>
    <title>Contracts Simulation</title>
</head>

<body>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
</script>

<script>
    // Utility Functions starts here
    function random_sample_std_normal_dist() {
      let u = 0, v = 0;
      while (u === 0) u = Math.random(); //Converting [0,1) to (0,1)
      while (v === 0) v = Math.random();
      let num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
      if (num > 1 || num < -1) return random_sample_std_normal_dist() // resample between 0 and 1
      return num
    };

    function random_sample_std_normal_dist_postive() {
      let u = 0, v = 0;
      while (u === 0) u = Math.random(); //Converting [0,1) to (0,1)
      while (v === 0) v = Math.random();
      let num = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
      num = num / 10.0 + 0.5; // Translate to 0 -> 1
      if (num > 1 || num < -1) return random_sample_std_normal_dist() // resample between 0 and 1
      return num
    };

    function createTable(tableData, resultDiv, tableId) {
      var table = document.createElement('table');
      table.setAttribute('id', tableId);
      var tableBody = document.createElement('tbody');

      tableData.forEach(function (rowData) {
        var row = document.createElement('tr');

        rowData.forEach(function (cellData) {
          var cell = document.createElement('td');
          cell.appendChild(document.createTextNode(cellData));
          row.appendChild(cell);
        });

        tableBody.appendChild(row);
      });

      table.appendChild(tableBody);
      resultDiv.innerHTML = "";
      resultDiv.appendChild(table);
    };

    //Source: https://stackoverflow.com/questions/15547198/export-html-table-to-csv
    // Quick and simple export target #table_id into a csv
    function download_table_as_csv(table_id, separator = ',') {
      // Select rows from table_id
      var rows = document.querySelectorAll('table#' + table_id + ' tr');
      // Construct csv
      var csv = [];
      for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll('td, th');
        for (var j = 0; j < cols.length; j++) {
          // Clean innertext to remove multiple spaces and jumpline (break csv)
          var data = cols[j].innerText.replace(/(\r\n|\n|\r)/gm, '').replace(/(\s\s)/gm, ' ')
          // Escape double-quote with double-double-quote (see https://stackoverflow.com/questions/17808511/properly-escape-a-double-quote-in-csv)
          data = data.replace(/"/g, '""');
          // Push escaped string
          row.push('"' + data + '"');
        }
        csv.push(row.join(separator));
      }
      var csv_string = csv.join('\n');
      // Download it
      var filename = 'export_' + table_id + '_' + new Date().toLocaleDateString() + '.csv';
      var link = document.createElement('a');
      link.style.display = 'none';
      link.setAttribute('target', '_blank');
      link.setAttribute('href', 'data:text/csv;charset=utf-8,' + encodeURIComponent(csv_string));
      link.setAttribute('download', filename);
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    };


    function resetCanvas(graphId, chartContent) {
      var oldCanvas = document.getElementById(graphId)
      var newCanvas = oldCanvas.cloneNode(true);
      oldCanvas.remove();
      document.getElementById(chartContent).append(newCanvas);
      canvas = document.getElementById(graphId);
      ctx = canvas.getContext('2d');
    };

    function openSimulationTab(evt, simulationName) {
      var i, tabcontent, tablinks;

      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }

      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" w3-blue-grey", "");
      }

      document.getElementById(simulationName).style.display = "block";
      evt.currentTarget.className += " w3-blue-grey";
    };

    // Utility Functions ends here

    // Long Term Contract Simulation Specific Functions starts here
    function handle_LTC_Simulation() {

      var wsp = document.getElementById("ltc_wsp").value;
      var rp = document.getElementById("ltc_rp").value;
      var salp = document.getElementById("ltc_salp").value;
      var mean = document.getElementById("ltc_mean").value;
      var sd = document.getElementById("ltc_sd").value;
      var numIt = document.getElementById("ltc_numIt").value;
      var orderQty = document.getElementById("ltc_orderQty").value;

      if (wsp.length < 1 || rp.length < 1 || salp.length < 1 || mean.length < 1 || sd.length < 1 || numIt.length < 1) {
       // alert("One of the parameters is missing");
        return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var fulOrderQtyArr = [];
      var lostSalesArr = [];
      var excInvArr = [];
      var salesRevenueArr = [];
      var salRevenueArr = [];
      var costArr = [];
      var profitOrLossArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumCost = 0;
      var cumProLoss = 0;
      var cumFulQty = 0;
      var cumLostSales = 0
      var cumExcessInv = 0;
      var cumSalRevenue = 0;


      rowData[0] = ["Iteration Number", "Actual Demand", "Fulfiled Order Quantity", "Lost Sales", "Excess Inventory", "Sales Revenue", "Salvage Revenue", "Cost", "Profit/Loss"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);

        var fulQty = Math.min(parseFloat(demand), parseFloat(orderQty));
        fulOrderQtyArr[i] = fulQty;
        var lostSales = 0;
        var excessInv = 0;
        var salRevenue = 0;
        if (fulQty < demand) {
          lostSales = demand - fulQty;
        }
        if (orderQty > demand) {
          excessInv = parseFloat(orderQty) - parseFloat(demand);
          salRevenue = parseFloat(excessInv) * parseFloat(salp);
        }

        var revenue = parseFloat((rp * fulQty));
        var cost = parseFloat((orderQty * wsp));
        var proLoss = parseFloat(revenue) + parseFloat(salRevenue) - parseFloat(cost);
        rowData[i] = [i, demand, fulQty, lostSales, excessInv, revenue, salRevenue, cost, proLoss];

        cumDemand = cumDemand + demand;
        cumCost = cumCost + cost;
        cumRevenue = cumRevenue + revenue;
        cumProLoss = cumProLoss + proLoss;
        cumFulQty = cumFulQty + fulQty;
        cumLostSales = cumLostSales + lostSales;
        cumExcessInv = cumExcessInv + excessInv;
        cumSalRevenue = cumSalRevenue + salRevenue;

        itrArr[i] = i;
        actualDemandArr[i] = demand;
        lostSalesArr[i] = lostSales;
        excInvArr[i] = excessInv;
        fulOrderQtyArr[i] = fulQty;
        salesRevenueArr[i] = revenue;
        salRevenueArr[i] = salRevenue;
        costArr[i] = cost;
        profitOrLossArr[i] = proLoss;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number.EPSILON) * 100) / 100), (Math.round((cumFulQty + Number.EPSILON) * 100) / 100), (Math.round((cumLostSales + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumCost + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQty / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumLostSales / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCost / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss / numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined 
      itrArr.shift();
      actualDemandArr.shift();
      fulOrderQtyArr.shift();
      lostSalesArr.shift();
      excInvArr.shift();
      salesRevenueArr.shift();
      salRevenueArr.shift();
      costArr.shift();
      profitOrLossArr.shift();

      createTable(rowData, document.getElementById("ltc_result"), 'LTC_Result_Table');
      document.getElementById("ltc_resultBody").style.display = 'block';


      resetCanvas('LTC_Result_Quantity_Chart', 'ltc_chartContent');
      resetCanvas('LTC_Result_Monies_Chart', 'ltc_chartContent');

      new Chart("LTC_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Long Term Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity',
              data: fulOrderQtyArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Lost Sales',
              data: lostSalesArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Excess Inventory',
              data: excInvArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("LTC_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Long Term Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost',
              data: costArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss',
              data: profitOrLossArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Salvage Revenue',
              data: salRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue',
              data: salesRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };

    // Long Term Contract Simulation Specific Functions ends here

    //Spot Contract Simulation Specific Functions starts here

    function handle_His_Spot_Prices(retailPrice) {

      var rp = document.getElementById("spot_rp").value;

      if (rp.length < 1) {
        alert("Retail Price required for calculating historical prices");
        return;
      }

      var rowData = [];
      var sd = Math.floor((Math.random() * 7 + 1) * 10);
      var cumHisSpotPrice = 0;
      var numIt = 52;
      for (let i = 1; i <= numIt; i++) {

        rowData[0] = ["Week", "Historical Spot Prices"];

        var hisSpotPrice = Math.max((parseInt((parseFloat(rp) - parseFloat(random_sample_std_normal_dist_postive() * sd)), 10)), 0);
        cumHisSpotPrice = cumHisSpotPrice + hisSpotPrice;
        rowData[i] = [i, hisSpotPrice];
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumHisSpotPrice + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumHisSpotPrice / numIt + Number.EPSILON) * 100) / 100)];

      createTable(rowData, document.getElementById("spot_history_result"), 'Spot_Historical_Result_Table');

      var modal = document.getElementById("spot_history_result_modal");
      modal.style.display = "block";

      var span = document.getElementById("spot_close");
      span.onclick = function () {
        modal.style.display = "none";
      }
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    };

    function handle_spot_Simulation() {

      var rp = document.getElementById("spot_rp").value;
      var mean = document.getElementById("spot_mean").value;
      var sd = document.getElementById("spot_sd").value;
      var numIt = document.getElementById("spot_numIt").value;

      if (rp.length < 1 || mean.length < 1 || sd.length < 1 || numIt.length < 1) {
        alert("One of the parameters is missing");
        return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var salesRevenueArr = [];
      var costArr = [];
      var profitOrLossArr = [];
      var spotPriceArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumCost = 0;
      var cumProLoss = 0;
      var cumSpotPrice = 0;


      rowData[0] = ["Iteration Number", "Actual Demand", "Spot Price", "Sales Revenue", "Cost", "Profit/Loss"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);
        var spotPrice = 0;

        while (spotPrice == 0) {
          spotPrice = Math.max((parseInt((parseFloat(rp) - parseFloat(random_sample_std_normal_dist_postive() * (Math.floor((Math.random() * 7 + 1) * 10)))), 10)), 0);
        }


        var revenue = parseFloat((rp * demand));
        var cost = parseFloat((demand * spotPrice));
        var proLoss = parseFloat(revenue) - parseFloat(cost);
        rowData[i] = [i, demand, spotPrice, revenue, cost, proLoss];

        cumDemand = cumDemand + demand;
        cumCost = cumCost + cost;
        cumRevenue = cumRevenue + revenue;
        cumProLoss = cumProLoss + proLoss;
        cumSpotPrice = cumSpotPrice + spotPrice;

        itrArr[i] = i;
        actualDemandArr[i] = demand;
        salesRevenueArr[i] = revenue;
        costArr[i] = cost;
        profitOrLossArr[i] = proLoss;
        spotPriceArr[i] = spotPrice;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number.EPSILON) * 100) / 100), (Math.round((cumSpotPrice + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumCost + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumSpotPrice / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCost / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss / numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined 
      itrArr.shift();
      actualDemandArr.shift();
      salesRevenueArr.shift();
      costArr.shift();
      profitOrLossArr.shift();
      spotPriceArr.shift();

      createTable(rowData, document.getElementById("spot_result"), 'Spot_Result_Table');
      document.getElementById("spot_resultBody").style.display = 'block';


      resetCanvas('Spot_Result_Quantity_Chart', 'spot_chartContent');
      resetCanvas('Spot_Result_Monies_Chart', 'spot_chartContent');

      new Chart("Spot_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Spot Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("Spot_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Spot Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost',
              data: costArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss',
              data: profitOrLossArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Spot Price',
              data: spotPriceArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(0, 200, 150)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue',
              data: salesRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };

    //Spot Contract Simulation Specific Functions ends here

    // Long Term with Spot Contract Simulation Specific Functions starts here
    function handle_His_ltc_Spot_Prices(retailPrice) {

      var rp = document.getElementById("ltc_spot_rp").value;

      if (rp.length < 1) {
        alert("Retail Price required for calculating historical prices");
        return;
      }

      var rowData = [];
      var sd = Math.floor((Math.random() * 7 + 1) * 10);
      var cumHisSpotPrice = 0;
      var numIt = 52;
      for (let i = 1; i <= numIt; i++) {

        rowData[0] = ["Week", "Historical Spot Prices"];

        var hisSpotPrice = Math.max((parseInt((parseFloat(rp) - parseFloat(random_sample_std_normal_dist_postive() * sd)), 10)), 0);
        cumHisSpotPrice = cumHisSpotPrice + hisSpotPrice;
        rowData[i] = [i, hisSpotPrice];
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumHisSpotPrice + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumHisSpotPrice / numIt + Number.EPSILON) * 100) / 100)];

      createTable(rowData, document.getElementById("ltc_spot_history_result"), 'LTC_Spot_Historical_Result_Table');

      var modal = document.getElementById("ltc_spot_history_result_modal");
      modal.style.display = "block";

      var span = document.getElementById("ltc_spot_close");
      span.onclick = function () {
        modal.style.display = "none";
      }
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    };


    function handle_LTC_Spot_Simulation() {

      var wsp = document.getElementById("ltc_spot_wsp").value;
      var rp = document.getElementById("ltc_spot_rp").value;
      var salp = document.getElementById("ltc_spot_salp").value;
      var mean = document.getElementById("ltc_spot_mean").value;
      var sd = document.getElementById("ltc_spot_sd").value;
      var numIt = document.getElementById("ltc_spot_numIt").value;
      var orderQty = document.getElementById("ltc_spot_orderQty").value;

      if (wsp.length < 1 || rp.length < 1 || salp.length < 1 || mean.length < 1 || sd.length < 1 || numIt.length < 1) {
        alert("One of the parameters is missing");
        return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var fulOrderQtyArr = [];
      var fulOrderSpotQtyArr = [];
      var excInvArr = [];
      var salesRevenueArr = [];
      var salRevenueArr = [];
      var costArr = [];
      var profitOrLossArr = [];
      var spotPriceArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumCost = 0;
      var cumProLoss = 0;
      var cumFulQty = 0;
      var cumFulSpotQty = 0;
      var cumExcessInv = 0;
      var cumSalRevenue = 0;
      var cumSpotPrice = 0;


      rowData[0] = ["Iteration Number", "Actual Demand", "Quantity fulfiled by Long Term Contract", "Quantity fulfiled by Spot Contract", "Spot Price", "Excess Inventory", "Sales Revenue", "Salvage Revenue", "Cost", "Profit/Loss"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);
        var spotPrice = 0;

        while (spotPrice == 0) {
          spotPrice = Math.max((parseInt((parseFloat(rp) - parseFloat(random_sample_std_normal_dist_postive() * (Math.floor((Math.random() * 7 + 1) * 10)))), 10)), 0);
        }


        var fulQty = Math.min(parseFloat(demand), parseFloat(orderQty));
        fulOrderQtyArr[i] = fulQty;
        var fulSpotQty = 0;
        var excessInv = 0;
        var salRevenue = 0;
        if (fulQty < demand) {
          fulSpotQty = demand - fulQty;
        }
        if (orderQty > demand) {
          excessInv = parseFloat(orderQty) - parseFloat(demand);
          salRevenue = parseFloat(excessInv) * parseFloat(salp);
        }

        var revenue = parseFloat((rp * demand));
        var cost = parseFloat((orderQty * wsp) + (fulSpotQty * spotPrice));
        var proLoss = parseFloat(revenue) + parseFloat(salRevenue) - parseFloat(cost);
        rowData[i] = [i, demand, fulQty, fulSpotQty, spotPrice, excessInv, revenue, salRevenue, cost, proLoss];

        cumDemand = cumDemand + demand;
        cumCost = cumCost + cost;
        cumRevenue = cumRevenue + revenue;
        cumProLoss = cumProLoss + proLoss;
        cumFulQty = cumFulQty + fulQty;
        cumSpotPrice = cumSpotPrice + spotPrice;
        cumFulSpotQty = cumFulSpotQty + fulSpotQty;
        cumExcessInv = cumExcessInv + excessInv;
        cumSalRevenue = cumSalRevenue + salRevenue;

        itrArr[i] = i;
        actualDemandArr[i] = demand;
        fulOrderSpotQtyArr[i] = fulSpotQty;
        excInvArr[i] = excessInv;
        fulOrderQtyArr[i] = fulQty;
        salesRevenueArr[i] = revenue;
        salRevenueArr[i] = salRevenue;
        spotPriceArr[i] = spotPrice;
        costArr[i] = cost;
        profitOrLossArr[i] = proLoss;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number.EPSILON) * 100) / 100), (Math.round((cumFulQty + Number.EPSILON) * 100) / 100), (Math.round((cumFulSpotQty + Number.EPSILON) * 100) / 100), (Math.round((cumSpotPrice + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumCost + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQty / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulSpotQty / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumSpotPrice / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCost / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss / numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined 
      itrArr.shift();
      actualDemandArr.shift();
      fulOrderQtyArr.shift();
      fulOrderSpotQtyArr.shift();
      spotPriceArr.shift();
      excInvArr.shift();
      salesRevenueArr.shift();
      salRevenueArr.shift();
      costArr.shift();
      profitOrLossArr.shift();

      createTable(rowData, document.getElementById("ltc_spot_result"), 'LTC_Spot_Result_Table');
      document.getElementById("ltc_spot_resultBody").style.display = 'block';


      resetCanvas('LTC_Spot_Result_Quantity_Chart', 'ltc_spot_chartContent');
      resetCanvas('LTC_Spot_Result_Monies_Chart', 'ltc_spot_chartContent');

      new Chart("LTC_Spot_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Long Term with Spot Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Quantity fulfilled by Long Term Contract',
              data: fulOrderQtyArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Quantity fulfilled by Spot Purchases',
              data: fulOrderSpotQtyArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 15)',
              yAxisID: 'y',
            },
            {
              label: 'Excess Inventory',
              data: excInvArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("LTC_Spot_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Long Term with Spot Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost',
              data: costArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Spot Price',
              data: spotPriceArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(15, 235, 10)',
              yAxisID: 'y',
            },

            {
              label: 'Profit or Loss',
              data: profitOrLossArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Salvage Revenue',
              data: salRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue',
              data: salesRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };


    // Long Term with Spot Contract Simulation Specific Functions ends here

    //Options Contract Simulation Specific Functions starts here
    function handle_Options_Simulation() {

      var uop = document.getElementById("options_uop").value;
      var uep = document.getElementById("options_uep").value;
      var rp = document.getElementById("options_rp").value;
      var mean = document.getElementById("options_mean").value;
      var sd = document.getElementById("options_sd").value;
      var numIt = document.getElementById("options_numIt").value;
      var orderQty = document.getElementById("options_orderQty").value;

      if (uop.length < 1 || uep.length < 1 || rp.length < 1 || mean.length < 1 || sd.length < 1 || numIt.length < 1) {
        alert("One of the parameters is missing");
        return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var fulOrderQtyArr = [];
      var lostSalesArr = [];
      var expiredOptionsArr = [];
      var salesRevenueArr = [];
      //var expiredOptionsCostArr = [];
      var costArr = [];
      var profitOrLossArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumCost = 0;
      var cumProLoss = 0;
      var cumFulQty = 0;
      var cumLostSales = 0;
      var cumExpiredOptions = 0;
      //var cumExpiredOptionsCost = 0;


      rowData[0] = ["Iteration Number", "Actual Demand", "Fulfiled Order Quantity", "Lost Sales", "Expired Options", "Sales Revenue", "Cost", "Profit/Loss"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);

        var fulQty = Math.min(parseFloat(demand), parseFloat(orderQty));
        fulOrderQtyArr[i] = fulQty;
        var lostSales = 0;
        var expiredOptions = 0;
        // var expiredOptionsCost = 0;
        if (fulQty < demand) {
          lostSales = demand - fulQty;
        }
        if (orderQty > demand) {
          expiredOptions = parseFloat(orderQty) - parseFloat(demand);
          // expiredOptionsCost = parseFloat(expiredOptions) * parseFloat(uop);
        }

        var revenue = parseFloat((rp * fulQty));
        var cost = parseFloat((orderQty * uop) + (fulQty * uep));
        var proLoss = parseFloat(revenue) - parseFloat(cost);
        rowData[i] = [i, demand, fulQty, lostSales, expiredOptions, revenue, cost, proLoss];

        cumDemand = cumDemand + demand;
        cumCost = cumCost + cost;
        cumRevenue = cumRevenue + revenue;
        cumProLoss = cumProLoss + proLoss;
        cumFulQty = cumFulQty + fulQty;
        cumLostSales = cumLostSales + lostSales;
        cumExpiredOptions = cumExpiredOptions + expiredOptions;

        itrArr[i] = i;
        actualDemandArr[i] = demand;
        lostSalesArr[i] = lostSales;
        expiredOptionsArr[i] = expiredOptions;
        fulOrderQtyArr[i] = fulQty;
        salesRevenueArr[i] = revenue;
        costArr[i] = cost;
        profitOrLossArr[i] = proLoss;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number.EPSILON) * 100) / 100), (Math.round((cumFulQty + Number.EPSILON) * 100) / 100), (Math.round((cumLostSales + Number.EPSILON) * 100) / 100), (Math.round((cumExpiredOptions + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumCost + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQty / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumLostSales / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumExpiredOptions / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCost / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss / numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined 
      itrArr.shift();
      actualDemandArr.shift();
      fulOrderQtyArr.shift();
      lostSalesArr.shift();
      expiredOptionsArr.shift();
      salesRevenueArr.shift();
      costArr.shift();
      profitOrLossArr.shift();

      createTable(rowData, document.getElementById("options_result"), 'Options_Result_Table');
      document.getElementById("options_resultBody").style.display = 'block';


      resetCanvas('Options_Result_Quantity_Chart', 'options_chartContent');
      resetCanvas('Options_Result_Monies_Chart', 'options_chartContent');

      new Chart("Options_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Options Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity',
              data: fulOrderQtyArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Lost Sales',
              data: lostSalesArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Expired Options',
              data: expiredOptionsArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("Options_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Long Term Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost',
              data: costArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss',
              data: profitOrLossArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue',
              data: salesRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };
    //Options Contract Simulation Specific Functions ends here

    //LTC with Options Contract Simulation Specific Functions starts here
    function handle_LTC_Options_Simulation() {
      var wsp = document.getElementById("ltc_options_wsp").value;
      var uop = document.getElementById("ltc_options_uop").value;
      var uep = document.getElementById("ltc_options_uep").value;
      var rp = document.getElementById("ltc_options_rp").value;
      var salPrice = document.getElementById("ltc_options_salp").value;
      var mean = document.getElementById("ltc_options_mean").value;
      var sd = document.getElementById("ltc_options_sd").value;
      var numIt = document.getElementById("ltc_options_numIt").value;
      var orderQty = document.getElementById("ltc_options_orderQty").value;
      var procurementOrderQty = document.getElementById("ltc_options_procurementOrderQty").value;

      if (uop.length < 1 || uep.length < 1 || wsp.length < 1 || rp.length < 1 || salPrice.length < 1 || mean.length < 1 || sd.length < 1 || numIt.length < 1 || orderQty.length < 1 || procurementOrderQty.length < 1) {
        alert("One of the parameters is missing");
        return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var fulOrderQtyByLTCArr = [];
      var fulOrderQtyByOptionsArr = [];
      var lostSalesArr = [];
      var expiredOptionsArr = [];
      var excessInvArr = [];
      var salesRevenueArr = [];
      var costArr = [];
      var profitOrLossArr = [];
      var salRevenueArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumCost = 0;
      var cumProLoss = 0;
      var cumFulQtyByLTC = 0;
      var cumFulQtyByOptions = 0;
      var cumLostSales = 0
      var cumExpiredOptions = 0;
      var cumExcessInv = 0;
      var cumSalRevenue = 0;

      orderQty = parseFloat(orderQty);
      procurementOrderQty = parseFloat(procurementOrderQty);

      rowData[0] = ["Iteration Number", "Actual Demand", "Fulfiled Order Quantity By Long Term Contract", "Fulfiled Order Quantity By Options Contract", "Lost Sales", "Excess Inventory", "Expired Options", "Sales Revenue", "Salvage Revenue", "Cost", "Profit/Loss"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);

        var fulQtyByLTC = Math.min(parseFloat(demand), parseFloat(orderQty));
        var fulQtyByOptions = 0;
        var excessInv = 0;

        if (demand > orderQty) {
          fulQtyByOptions = Math.min(parseFloat(demand) - parseFloat(orderQty), parseFloat(procurementOrderQty));
        }

        fulOrderQtyByLTCArr[i] = fulQtyByLTC;
        fulOrderQtyByOptionsArr[i] = fulQtyByOptions;

        var lostSales = 0;
        var expiredOptions = 0;
        // var expiredOptionsCost = 0;
        if ((fulQtyByLTC + fulQtyByOptions) < demand) {
          lostSales = demand - fulQtyByLTC - fulQtyByOptions;
        }

        if ((orderQty + procurementOrderQty) > demand) {
          if (orderQty > demand) {
            excessInv = orderQty - demand;
            expiredOptions = parseFloat(procurementOrderQty);
          }
          else {
            excessInv = 0;
            expiredOptions = parseFloat(orderQty) + parseFloat(procurementOrderQty) - parseFloat(demand);
          }
        }

        var revenue = parseFloat((rp * (fulQtyByLTC + fulQtyByOptions)));
        var salRevenue = parseFloat(salPrice * excessInv);
        var cost = parseFloat((procurementOrderQty * uop) + (fulQtyByOptions * uep) + (orderQty * wsp));
        var proLoss = parseFloat(revenue) + parseFloat(salRevenue) - parseFloat(cost);
        rowData[i] = [i, demand, fulQtyByLTC, fulQtyByOptions, lostSales, excessInv, expiredOptions, revenue, salRevenue, cost, proLoss];

        cumDemand = cumDemand + demand;
        cumCost = cumCost + cost;
        cumRevenue = cumRevenue + revenue;
        cumSalRevenue = cumSalRevenue + salRevenue;
        cumProLoss = cumProLoss + proLoss;
        cumFulQtyByLTC = cumFulQtyByLTC + fulQtyByLTC;
        cumFulQtyByOptions = cumFulQtyByOptions + fulQtyByOptions;
        cumLostSales = cumLostSales + lostSales;
        cumExcessInv = cumExcessInv + excessInv;
        cumExpiredOptions = cumExpiredOptions + expiredOptions;

        itrArr[i] = i;
        actualDemandArr[i] = demand;
        lostSalesArr[i] = lostSales;
        expiredOptionsArr[i] = expiredOptions;
        fulOrderQtyByLTCArr[i] = fulQtyByLTC;
        fulOrderQtyByOptionsArr[i] = fulQtyByOptions;
        salesRevenueArr[i] = revenue;
        salRevenueArr[i] = salRevenue;
        excessInvArr[i] = excessInv;
        costArr[i] = cost;
        profitOrLossArr[i] = proLoss;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByLTC + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByOptions + Number.EPSILON) * 100) / 100), (Math.round((cumLostSales + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv + Number.EPSILON) * 100) / 100), (Math.round((cumExpiredOptions + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumCost + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByLTC / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByOptions / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumLostSales / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumExpiredOptions / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCost / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss / numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined 
      itrArr.shift();
      actualDemandArr.shift();
      fulOrderQtyByLTCArr.shift();
      fulOrderQtyByOptionsArr.shift();
      lostSalesArr.shift();
      excessInvArr.shift();
      expiredOptionsArr.shift();
      salesRevenueArr.shift();
      salRevenueArr.shift();
      costArr.shift();
      profitOrLossArr.shift();

      createTable(rowData, document.getElementById("ltc_options_result"), 'LTC_Options_Result_Table');
      document.getElementById("ltc_options_resultBody").style.display = 'block';


      resetCanvas('LTC_Options_Result_Quantity_Chart', 'ltc_options_chartContent');
      resetCanvas('LTC_Options_Result_Monies_Chart', 'ltc_options_chartContent');

      new Chart("LTC_Options_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Long Term with Options Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity By Long Term Contract',
              data: fulOrderQtyByLTCArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(0, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity By Options Contract',
              data: fulOrderQtyByOptionsArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Lost Sales',
              data: lostSalesArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Excess Inventory',
              data: excessInvArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 0, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Expired Options',
              data: expiredOptionsArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("LTC_Options_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Long Term Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost',
              data: costArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss',
              data: profitOrLossArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            },
            {
              label: 'Salvage Revenue',
              data: salRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 0, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue',
              data: salesRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };
//LTC with Options Contract Simulation Specific Functions ends here

//LTC with Options and Spot Contract Simulation Specific Functions
//starts here
function handle_His_ltc_Options_Spot_Prices(retailPrice) {

      var rp = document.getElementById("ltc_options_spot_rp").value;

      if (rp.length < 1) {
        alert("Retail Price required for calculating historical prices");
        return;
      }

      var rowData = [];
      var sd = Math.floor((Math.random() * 7 + 1) * 10);
      var cumHisSpotPrice = 0;
      var numIt = 52;
      for (let i = 1; i <= numIt; i++) {

        rowData[0] = ["Week", "Historical Spot Prices"];

        var hisSpotPrice = Math.max((parseInt((parseFloat(rp) - parseFloat(random_sample_std_normal_dist_postive() * sd)), 10)), 0);
        cumHisSpotPrice = cumHisSpotPrice + hisSpotPrice;
        rowData[i] = [i, hisSpotPrice];
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumHisSpotPrice + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumHisSpotPrice / numIt + Number.EPSILON) * 100) / 100)];

      createTable(rowData, document.getElementById
      ("ltc_options_spot_history_result"),
      'LTC_Options_Spot_Historical_Result_Table');

      var modal = document.getElementById
      ("ltc_options_spot_history_result_modal");
      modal.style.display = "block";

      var span = document.getElementById("ltc_options_spot_close");
      span.onclick = function () {
        modal.style.display = "none";
      }
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }
    };

   function handle_LTC_Options_Spot_Simulation() {

      var wsp = document.getElementById("ltc_options_spot_wsp").value;
      var uop = document.getElementById("ltc_options_spot_uop").value;
      var uep = document.getElementById("ltc_options_spot_uep").value;
      var rp = document.getElementById("ltc_options_spot_rp").value;
      var salPrice = document.getElementById("ltc_options_spot_salp").value;
      var mean = document.getElementById("ltc_options_spot_mean").value;
      var sd = document.getElementById("ltc_options_spot_sd").value;
      var numIt = document.getElementById("ltc_options_spot_numIt").value;
      var orderQty = document.getElementById("ltc_options_spot_orderQty").value;
      var procurementOrderQty = document.getElementById("ltc_options_spot_procurementOrderQty").value;

      if (uop.length < 1 || uep.length < 1 || wsp.length < 1 || rp.length < 1 || salPrice.length < 1 || mean.length < 1 || sd.length < 1 || numIt.length < 1 || orderQty.length < 1 || procurementOrderQty.length < 1) {
        alert("One of the parameters is missing");
        return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var spotPriceArr = [];
      var fulOrderQtyByLTCArr = [];
      var fulOrderQtyByOptionsArr = [];
      var fulOrderQtyBySpotArr = [];
      var expiredOptionsArr = [];
      var excessInvArr = [];
      var salesRevenueArr = [];
      var costArr = [];
      var profitOrLossArr = [];
      var salRevenueArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumCost = 0;
      var cumProLoss = 0;
      var cumFulQtyByLTC = 0;
      var cumFulQtyByOptions = 0;
      var cumFulQtyBySpot = 0;
      var cumExpiredOptions = 0;
      var cumExcessInv = 0;
      var cumSalRevenue = 0;
      var cumSpotPrice = 0;

      orderQty = parseFloat(orderQty);
      procurementOrderQty = parseFloat(procurementOrderQty);

      rowData[0] = ["Iteration Number", "Actual Demand", "Fulfiled Order Quantity By Long Term Contract", "Fulfiled Order Quantity By Options Contract", "Fulfiled Order Quantity By Spot Contract", "Excess Inventory", "Expired Options", "Spot Price", "Sales Revenue", "Salvage Revenue", "Cost",
      "Profit/Loss"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);

        var spotPrice = 0;
        while (spotPrice == 0) {
          spotPrice = Math.max((parseInt((parseFloat(rp) - parseFloat(random_sample_std_normal_dist_postive() * (Math.floor((Math.random() * 7 + 1) * 10)))), 10)), 0);
        }

        var fulQtyByLTC = Math.min(parseFloat(demand), parseFloat(orderQty));
        var fulQtyByOptions = 0;
        var fulSpotQty = 0;
        var excessInv = 0;

        if (demand > orderQty) {
          fulQtyByOptions = Math.min(parseFloat(demand) - parseFloat(orderQty), parseFloat(procurementOrderQty));
        }

        if(demand > (orderQty+procurementOrderQty)){
        fulSpotQty = demand - (orderQty+procurementOrderQty);
        }

        fulOrderQtyByLTCArr[i] = fulQtyByLTC;
        fulOrderQtyByOptionsArr[i] = fulQtyByOptions;

        var expiredOptions = 0;
        // var expiredOptionsCost = 0;

        if ((orderQty + procurementOrderQty) > demand) {
          if (orderQty > demand) {
            excessInv = orderQty - demand;
            expiredOptions = parseFloat(procurementOrderQty);
          }
          else {
            excessInv = 0;
            expiredOptions = parseFloat(orderQty) + parseFloat(procurementOrderQty) - parseFloat(demand);
          }
        }

        var revenue = parseFloat((rp * demand));
        var salRevenue = parseFloat(salPrice * excessInv);
        var cost = parseFloat((procurementOrderQty * uop) + (fulQtyByOptions * uep) + (orderQty * wsp) + (fulSpotQty*spotPrice));
        var proLoss = parseFloat(revenue) + parseFloat(salRevenue) - parseFloat(cost);
        rowData[i] = [i, demand, fulQtyByLTC, fulQtyByOptions, fulSpotQty, excessInv, expiredOptions, spotPrice, revenue, salRevenue, cost, proLoss];

        cumDemand = cumDemand + demand;
        cumCost = cumCost + cost;
        cumRevenue = cumRevenue + revenue;
        cumSalRevenue = cumSalRevenue + salRevenue;
        cumProLoss = cumProLoss + proLoss;
        cumFulQtyByLTC = cumFulQtyByLTC + fulQtyByLTC;
        cumFulQtyByOptions = cumFulQtyByOptions + fulQtyByOptions;
        cumFulQtyBySpot = cumFulQtyBySpot + fulSpotQty;
        cumExcessInv = cumExcessInv + excessInv;
        cumExpiredOptions = cumExpiredOptions + expiredOptions;
        cumSpotPrice = cumSpotPrice + spotPrice;

        itrArr[i] = i;
        actualDemandArr[i] = demand;
        expiredOptionsArr[i] = expiredOptions;
        fulOrderQtyByLTCArr[i] = fulQtyByLTC;
        fulOrderQtyByOptionsArr[i] = fulQtyByOptions;
        fulOrderQtyBySpotArr[i] = fulSpotQty;
        salesRevenueArr[i] = revenue;
        salRevenueArr[i] = salRevenue;
        excessInvArr[i] = excessInv;
        costArr[i] = cost;
        spotPriceArr[i] = spotPrice;
        profitOrLossArr[i] = proLoss;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByLTC + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByOptions + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyBySpot + Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv +
      Number.EPSILON) * 100) / 100), (Math.round((cumExpiredOptions + Number.EPSILON) * 100) / 100), (Math.round((cumSpotPrice + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue + Number.EPSILON) * 100) / 100), (Math.round((cumCost +
       Number.EPSILON) * 100) / 100), (Math.round((cumProLoss + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByLTC / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyByOptions / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumFulQtyBySpot / numIt + Number.EPSILON) * 100) /
      100), (Math.round((cumExcessInv / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumExpiredOptions / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumSpotPrice / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round(
      (cumSalRevenue / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCost / numIt + Number.EPSILON) * 100) / 100), (Math.round((cumProLoss / numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined
      itrArr.shift();
      actualDemandArr.shift();
      fulOrderQtyByLTCArr.shift();
      fulOrderQtyByOptionsArr.shift();
      fulOrderQtyBySpotArr.shift();
      excessInvArr.shift();
      expiredOptionsArr.shift();
      spotPriceArr.shift();
      salesRevenueArr.shift();
      salRevenueArr.shift();
      costArr.shift();
      profitOrLossArr.shift();

      createTable(rowData, document.getElementById("ltc_options_spot_result"), 'LTC_Options_Spot_Result_Table');
      document.getElementById("ltc_options_spot_resultBody").style.display = 'block';


      resetCanvas('LTC_Options_Spot_Result_Quantity_Chart', 'ltc_options_spot_chartContent');
      resetCanvas('LTC_Options_Spot_Result_Monies_Chart', 'ltc_options_spot_chartContent');

      new Chart("LTC_Options_Spot_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Long Term with Options and Spot Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity By Long Term Contract',
              data: fulOrderQtyByLTCArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(0, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity By Options Contract',
              data: fulOrderQtyByOptionsArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity By Spot Contract',
              data: fulOrderQtyBySpotArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 62, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Excess Inventory',
              data: excessInvArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 0, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Expired Options',
              data: expiredOptionsArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("LTC_Options_Spot_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Long Term with Options and Spot Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost',
              data: costArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss',
              data: profitOrLossArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            },
            {
              label: 'Salvage Revenue',
              data: salRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 0, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue',
              data: salesRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };

//LTC with Options and Spot Contract Simulation Specific Functions ends
//here

    // Revenue Sharing Contract Simulation Specific Functions starts here
    function handle_RS_Simulation() {

      var wsp = document.getElementById("rs_wsp").value;
      var rp = document.getElementById("rs_rp").value;
      var salp = document.getElementById("rs_salp").value;
      var rev_percent = document.getElementById("rs_rev_percent").value;
      var mean = document.getElementById("rs_mean").value;
      var sd = document.getElementById("rs_sd").value;
      var numIt = document.getElementById("rs_numIt").value;
      var orderQty = document.getElementById("rs_orderQty").value;
      var cp = document.getElementById("rs_cp").value;

      if (wsp.length < 1 || rp.length < 1 || salp.length < 1 || mean
      .length < 1 || sd.length < 1 || numIt.length < 1 || rev_percent
      .length < 1 || cp.length < 1) {
       // alert("One of the parameters is missing");
        return;
      }

      else if(rev_percent < 0 || rev_percent > 100){
        alert("Revenue retained should be between 0 and 100");
      return;
      }

      var rowData = [];
      var itrArr = [];
      var actualDemandArr = [];
      var fulOrderQtyArr = [];
      var lostSalesArr = [];
      var excInvArr = [];
      var salesRevenueArr = [];
      var salRevenueArr = [];
      var wholeSalesRevenueSupArr = [];
      var salesRevenueRetArr = [];
      var salesRevenueSupArr = [];
      var costRetArr = [];
      var costSupArr = [];
      var profitOrLossRetArr = [];
      var profitOrLossSupArr = [];

      var cumDemand = 0;
      var cumRevenue = 0;
      var cumRevenueRet = 0;
      var cumRevenueSup = 0;
      var cumWholeSalesRevenueSup = 0;
      var cumCostRet = 0;
      var cumCostSup = 0;
      var cumProLossRet = 0;
      var cumProLossSup = 0;
      var cumFulQty = 0;
      var cumLostSales = 0
      var cumExcessInv = 0;
      var cumSalRevenue = 0;

rowData[0] = ["Iteration Number", "Actual Demand", "Fulfiled Order        Quantity", "Lost Sales", "Excess Inventory", "Supplier Revenue from Wholesale transaction", "Total Sales Revenue", "Sales Revenue retained by Retailer", "Sales Revenue shared with Supplier",        "Salvage Revenue",
 "Cost to Retailer",        "Cost to Supplier",        "Profit/Loss to Retailer","Profit/Loss to Supplier"];
      for (let i = 1; i <= numIt; i++) {

        var demand = Math.max((parseInt((parseFloat(mean) + parseFloat(random_sample_std_normal_dist() * sd)), 10)), 0);

        var fulQty = Math.min(parseFloat(demand), parseFloat(orderQty));
        fulOrderQtyArr[i] = fulQty;
        var lostSales = 0;
        var excessInv = 0;
        var salRevenue = 0;
        if (fulQty < demand) {
          lostSales = demand - fulQty;
        }
        if (orderQty > demand) {
          excessInv = parseFloat(orderQty) - parseFloat(demand);
          salRevenue = parseFloat(excessInv) * parseFloat(salp);
        }

        var revenue = parseFloat((rp * fulQty));
        var revenueRet = parseFloat((revenue * rev_percent)/100);
        var revenueSup = parseFloat((revenue * (100-rev_percent))/100);
        var wholesaleRevenue = parseFloat((wsp * orderQty))
        var costRet = parseFloat((orderQty * wsp));
        var costSup = parseFloat((orderQty * cp));
        var proLossRet = parseFloat(revenueRet) + parseFloat(salRevenue) -
        parseFloat(costRet);
        var proLossSup = parseFloat(wholesaleRevenue)+parseFloat(revenueSup) -
        parseFloat(costSup);
        rowData[i] = [i, demand, fulQty, lostSales, excessInv, wholesaleRevenue, revenue,
        revenueRet,revenueSup, salRevenue, costRet, costSup, proLossRet,
         proLossSup ];

        cumDemand = cumDemand + demand;
        cumCostRet = cumCostRet + costRet;
        cumCostSup = cumCostSup + costSup;
        cumRevenue = cumRevenue + revenue;
        cumRevenueRet = cumRevenueRet + revenueRet;
        cumRevenueSup = cumRevenueSup + revenueSup;
        cumWholeSalesRevenueSup = cumWholeSalesRevenueSup + wholesaleRevenue;
        cumProLossRet = cumProLossRet + proLossRet;
        cumProLossSup = cumProLossSup + proLossSup;
        cumFulQty = cumFulQty + fulQty;
        cumLostSales = cumLostSales + lostSales;
        cumExcessInv = cumExcessInv + excessInv;
        cumSalRevenue = cumSalRevenue + salRevenue;


        itrArr[i] = i;
        actualDemandArr[i] = demand;
        lostSalesArr[i] = lostSales;
        excInvArr[i] = excessInv;
        fulOrderQtyArr[i] = fulQty;
        wholeSalesRevenueSupArr[i] = wholesaleRevenue;
        salesRevenueArr[i] = revenue;
        salesRevenueRetArr[i] = revenueRet;
        salesRevenueSupArr[i] = revenueSup;
        salRevenueArr[i] = salRevenue;
        costRetArr[i] = costRet;
        costSupArr[i] = costSup;
        profitOrLossRetArr[i] = proLossRet;
        profitOrLossSupArr[i] = proLossSup;
      }
      rowData[numIt + 1] = ["Total", (Math.round((cumDemand + Number
      .EPSILON) * 100) / 100), (Math.round((cumFulQty + Number.EPSILON)
      * 100) / 100), (Math.round((cumLostSales + Number.EPSILON) * 100)
      / 100), (Math.round((cumExcessInv + Number.EPSILON) * 100) / 100),
      (Math.round((cumWholeSalesRevenueSup + Number.EPSILON) * 100) / 100),
       (Math.round((cumRevenue + Number.EPSILON) * 100) / 100),
       (Math.round((cumRevenueRet + Number.EPSILON) * 100) / 100), (Math.round(
       (cumRevenueSup + Number.EPSILON) * 100) / 100), (Math
       .round((cumSalRevenue + Number.EPSILON) * 100) / 100), (Math
       .round((cumCostRet + Number.EPSILON) * 100) / 100),(Math
       .round((cumCostSup + Number.EPSILON) * 100) / 100), (Math.round(
       (cumProLossRet + Number.EPSILON) * 100) / 100),(Math.round(
       (cumProLossSup + Number.EPSILON) * 100) / 100)];

      rowData[numIt + 2] = ["Average", (Math.round((cumDemand / numIt +
      Number.EPSILON) * 100) / 100), (Math.round((cumFulQty / numIt +
      Number.EPSILON) * 100) / 100), (Math.round((cumLostSales / numIt +
       Number.EPSILON) * 100) / 100), (Math.round((cumExcessInv / numIt
       + Number.EPSILON) * 100) / 100), (Math.round((cumWholeSalesRevenueSup / numIt
       + Number.EPSILON) * 100) / 100),(Math.round((cumRevenue / numIt
       + Number.EPSILON) * 100) / 100),(Math.round((cumRevenueRet / numIt
       + Number.EPSILON) * 100) / 100),(Math.round((cumRevenueSup / numIt
       + Number.EPSILON) * 100) / 100), (Math.round((cumSalRevenue /
       numIt + Number.EPSILON) * 100) / 100), (Math.round((cumCostRet /
       numIt + Number.EPSILON) * 100) / 100),(Math.round((cumCostSup /
       numIt + Number.EPSILON) * 100) / 100),(Math.round((cumProLossRet /
       numIt + Number.EPSILON) * 100) / 100),(Math.round((cumProLossSup /
       numIt + Number.EPSILON) * 100) / 100)];

      //Remove the first undefined
      itrArr.shift();
      actualDemandArr.shift();
      fulOrderQtyArr.shift();
      lostSalesArr.shift();
      excInvArr.shift();
      salesRevenueArr.shift();
      salesRevenueRetArr.shift();
      salesRevenueSupArr.shift();
      wholeSalesRevenueSupArr.shift();
      salRevenueArr.shift();
      costRetArr.shift();
      costSupArr.shift();
      profitOrLossRetArr.shift();
      profitOrLossSupArr.shift();

      createTable(rowData, document.getElementById("rs_result"),
      'RS_Result_Table');
      document.getElementById("rs_resultBody").style.display = 'block';


      resetCanvas('RS_Result_Quantity_Chart', 'rs_chartContent');
      resetCanvas('RS_Result_Monies_Chart', 'rs_chartContent');

      new Chart("RS_Result_Quantity_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Quantity Chart for Revenue Sharing Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'Quantity'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'Quantity',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Actual Demand',
              data: actualDemandArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Fulfilled Order Quantity',
              data: fulOrderQtyArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Lost Sales',
              data: lostSalesArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Excess Inventory',
              data: excInvArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });

      new Chart("RS_Result_Monies_Chart", {
        backgroundColor: "transparent",
        type: 'line',
        options: {
          responsive: true,
          interaction: {
            mode: 'index',
            intersect: false,
          },
          stacked: false,

          title: {
            display: true,
            text: 'Monies Chart for Long Term Contract'
          },

          scales: {
            xAxes: [{
              offset: false,
              scaleLabel: {
                display: true,
                labelString: 'Iterations'
              }
            }],
            yAxes: [{
              scaleLabel: {
                display: true,
                labelString: 'in Rupees'
              },
              id: 'y',
              type: 'linear',
              position: 'left',
              display: true,
              title: 'in Rupees',
              beginAtZero: false,
              grid: {
                drawOnChartArea: false, // only want the grid lines for one axis to show up
              }
            }]
          }
        },
        data: {
          labels: itrArr,
          datasets: [
            {
              label: 'Cost to Supplier',
              data: costSupArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 99, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Cost to Retailer',
              data: costRetArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 199, 132)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss to Retailer',
              data: profitOrLossRetArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 162, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Profit or Loss to Supplier',
              data: profitOrLossSupArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 62, 235)',
              yAxisID: 'y',
            },
            {
              label: 'Salvage Revenue',
              data: salRevenueArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(255, 130, 99)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue to Retailer',
              data: salesRevenueRetArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 135, 162)',
              yAxisID: 'y',
            },
            {
              label: 'Sales Revenue to Supplier',
              data: salesRevenueSupArr,
              backgroundColor: "rgba(0,0,0,0.0)",
              borderColor: 'rgb(54, 235, 162)',
              yAxisID: 'y',
            }
          ]
        },
      });


    };

    // Revenue sharing Contract Simulation Specific Functions ends here








</script>

<style>
    table,
    th,
    td {
      border: 1px solid black;
      margin: auto;
      text-align: center;
    }

    .center {
      margin: auto;
      text-align: center;
    }

    .left {
      margin: auto;
      text-align: left;
    }
	
	.right {
      margin: auto;
      text-align: right;
    }

    fieldset {
      background-color: #f1f1f1;
      border: none;
      border-radius: 2px;
      margin-bottom: 12px;
      overflow: hidden;
      padding: 0 .625em;
    }

    label {
      cursor: pointer;
      display: inline-block;
      /*padding: 3px 6px; */
      text-align: left;
      /*width: 300px;*/
      vertical-align: top;
    }

    input {
      font-size: inherit;
    }

    /* Style the tab */
    .tab {
      overflow: hidden;
      border: 1px solid #ccc;
      background-color: #f1f1f1;
    }

    /* Style the buttons that are used to open the tab content */
    .tab button {
	  background-color: inherit;
	  float: left;
	  border: none;
	  outline: none;
	  cursor: pointer;
	  padding: 14px 16px;
	  transition: 0.3s;
	  font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
      background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
      background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
	  position: fixed;
      display: none;
      padding: 6px 12px;
      border-top: none;
      animation: fadeEffect 1s;	  
 	  overflow-y: auto;
    }
	
		.ltc_left {
	  position: fixed;
	  padding: 0px 12px;
	  top: 92px;
	  left: 0px;
	  bottom: 0px;
	  width: 400px;
	  background-color: #eee;
	  overflow-y: auto;
	  float:left;
	  border: double;
    }
	
	.ltc_right {
	  height: auto;float:right;
	  height: 430px;
	  overflow-y: auto;
	  margin-left: 380px;
    }

    @keyframes fadeEffect {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* The Modal (background) */
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      /* right: 25%;
  top: 25%;
  left: 25%;
  bottom: 25%; */
      width: 50%;
      /* Full width */
      height: 50%;
      /* Full height */
	    margin-top: 30px;
        margin-bottom: 10px;
      overflow: auto;

      /* Enable scroll if needed */
      background-color: rgb(10, 229, 236);
      /* Fallback color */
      background-color: rgba(10, 229, 236, 1);
      /* Black w/ opacity */

    }
	   
    /* Modal Content/Box */
    .modal-content {
      background-color: #e01865;
      margin: 15% auto;
      /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      /* Could be more or less, depending on screen size */
      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      animation-name: animatetop;
      animation-duration: 0.4s
    }

    /* Add Animation */
    @keyframes animatetop {
      from {
        top: -300px;
        opacity: 0
      }

      to {
        top: 0;
        opacity: 1
      }
    }

    /* The Close Button */
    .close {
      color: rgb(0, 0, 0);
      float: right;
      font-size: 32px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
.slidecontainer {
  width: 50%; /* Width of the outside container */
  float: right;
}

/* The slider itself */
.slider {
  -webkit-appearance: none;  /* Override default CSS styles */
  appearance: none;
  width: 100%; /* Full-width */
  height: 10px; /* Specified height */
  background: #d3d3d3; /* Grey background */
  outline: none; /* Remove outline */
  opacity: 0.7; /* Set transparency (for mouse-over effects on hover) */
  -webkit-transition: .2s; /* 0.2 seconds transition on hover */
  transition: opacity .2s;
}

/* Mouse-over effects */
.slider:hover {
  opacity: 1; /* Fully shown on mouse-over */
}

/* The slider handle (use -webkit- (Chrome, Opera, Safari, Edge) and -moz- (Firefox) to override default look) */
.slider::-webkit-slider-thumb {
  -webkit-appearance: none; /* Override default look */
  appearance: none;
  width: 25px; /* Set a specific slider handle width */
  height: 25px; /* Slider handle height */
  background: #000000; /* Green background */
  cursor: pointer; /* Cursor on hover */
}

.slider::-moz-range-thumb {
  width: 25px; /* Set a specific slider handle width */
  height: 10px; /* Slider handle height */
  background: #04AA6D; /* Green background */
  cursor: pointer; /* Cursor on hover */
}

.glossy-button {
  display: inline-block;
  position: relative;
  background-color: #AAA;
  background-image: linear-gradient( /* chrome */
    hsla(0, 0%, 100%, 0.6), hsla(0, 0%, 100%, 0) 50%,
    hsla(0, 0%, 0%, 0.3) 50%, hsla(0, 0%, 100%, 0.2)
  );
  font-size: 18px;
  font-family: sans-serif;
  font-weight: bold;
  color: white;
  padding: 8px 30px;
  text-shadow:
    0 0 15px hsla(0, 0%, 100%, 1), /* bloom */
    0 2px 4px hsla(0, 0%, 0%, 0.7); /* drop shadow */
  border: none;
  border-radius: 50px;
  margin: 10px;
  box-shadow:
    inset 0 -5px 20px hsla(0, 0%, 0%, 0.4), /* top light */
    inset 0 5px 20px hsla(0, 0%, 100%, 0.4), /* bottom shadow */
    /* multiple light sources yall */
    -8px 8px 5px hsla(0, 0%, 0%, 0.15), /* drop shadow 1 */
    5px 18px 10px hsla(0, 0%, 0%, 0.2); /* drop shadow 2 */
  cursor: pointer;
  transition: transform 0.1s, box-shadow 0.1s;
}

/* highlight */
.glossy-button:before {
  content: '';
  display: block;
  position: absolute;
  left: 10px;
  right: 10px;
  top: 5px;
  height: 10px;
  border-radius: 10px;
  background: linear-gradient(
    hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0) );
}

.glossy-button--blue { background-color: #19F; }
.glossy-button--gold { background-color: #EA0; }
.glossy-button--green { background-color: #6C6; }
.glossy-button--red { background-color: #E21; }

.glossy-button:hover {
  transform: scale(1.05);
  box-shadow:
    inset 0 -5px 20px hsla(0, 0%, 0%, 0.4), /* top light */
    inset 0 5px 20px hsla(0, 0%, 100%, 0.4), /* bottom shadow */
    /* multiple light sources yall */
    -12px 12px 5px hsla(0, 0%, 0%, 0.15), /* drop shadow 1 */
    10px 25px 10px hsla(0, 0%, 0%, 0.2); /* drop shadow 2 */
}


</style>

<div class="center" class="w3-container">
    <h1 class="center"> Contracts Simulation </h1>

    <div class="w3-bar w3-black">
        <button class="w3-bar-item w3-button tablinks w3-blue-grey"
                onclick="openSimulationTab(event, 'Instructions')">
            Instructions
        </button>
        <button  class="w3-bar-item w3-button tablinks " onclick="openSimulationTab(event, 'LTC')">
            Long Term
        </button>
        <button class="w3-bar-item w3-button tablinks"
                onclick="openSimulationTab(event, 'Spot')">Spot
        </button>
        <button class="w3-bar-item w3-button tablinks"
                onclick="openSimulationTab(event, 'LTC-Spot')">Long Term
            with Spot
        </button>
        <button class="w3-bar-item w3-button tablinks"
                onclick="openSimulationTab(event, 'Options')">Options
        </button>
        <button class="w3-bar-item w3-button tablinks"
                onclick="openSimulationTab(event, 'LTC-Options')">Long Term
            with Options            
        </button>
        <button class="w3-bar-item w3-button tablinks"
                onclick="openSimulationTab(event, 'LTC-Options-Spot')">Long
            Term with Options and Spot            
        </button>
        <button class="w3-bar-item w3-button tablinks" onclick="openSimulationTab(event, 'RS')">
            Revenue Sharing        </button>
    </div>
    <br/>
    <!--Instructions HTML starts here-->
    <div class="w3-container tabcontent">
        <h1>Instructions</h1>
    </div>
    <!-- Instructions HTML ends here -->
    <!--LTC HTML starts here-->
    <div class="w3-container tabcontent" id="LTC">
        <div class="ltc_left w3-blue-grey" id="ltc_left" >
            <h5 class="left"> Please enter the following information and
                start the Simulation</h4>
            <br/>
            <div class="right">
                <label for="ltc_wsp" style="font-size:0.925em" >Wholesale Price</label>
                <input align="right" id="ltc_wsp" style="width: 60px;"type="text"/>
            </div>
            <br/>
            <div class="right">
                <label for="ltc_rp" style="font-size:0.925em">Retail Price</label>
                <input align="left" id="ltc_rp" style="width: 60px;"
                       type="text"/>
            </div>
            <br/>
            <div class="right">
                <label for="ltc_salp" style="font-size:0.925em">Salvage Price</label>
                <input align="left" id="ltc_salp" style="width: 60px;"
                       type="text"/>
            </div>
            <br/>
            <div class="right">
                <label for="ltc_mean" style="font-size:0.925em">Mean quantity</label>
                <input align="left" id="ltc_mean" style="width: 60px;"
                       type="text"/>
            </div>
            <br/>
            <div class="right">
                <label for="ltc_sd" style="font-size:0.925em"> Standard Deviation [Enter or Use Slider]</label>
                <input align="left" id="ltc_sd" style="width: 60px;"
                       type="text"/>
                <br/>
                <div class="slider-style">
                    <input id="ltc_sd_slider_min" style="width: 60px;" 
                           type="text" value="0" readonly />
                    <input class="slider" id="ltc_sd_slider" max="999"
                           min="0"
                           style="width: 200px; "
                           type="range" value="0">
                    <input id="ltc_sd_slider_max" style="width: 60px;   margin-top: 15px;"
                           type="text" readonly />
                </div>
            </div>
            <br/>
            <div class="right">
                <label for="ltc_orderQty" style="font-size:0.925em">Order Quantity</label>
                <input align="left" id="ltc_orderQty" style="width:60px;"
                       type="text"/>
            </div>
            <br/>
            <div class="right">
                <label for="ltc_numIt" style="font-size:0.925em"> Number of Iterations to be
                    performed</label>
                <input align="left" id="ltc_numIt" style="width: 60px;"
                       type="text"/>
            </div>
            <br/>
            <div class="center">
                <input class="glossy-button" onClick="handle_LTC_Simulation()" type="button"
                       value='Run Simulation'/>
            </div>
        </div>
        <div class="ltc_right" id="ltc_right" >
            <div class="center" hidden id="ltc_resultBody">
            <span><b>Result of the Simulation
			<br/>
            </b></span>
                <div id="ltc_chartContent">
                    <canvas id="LTC_Result_Quantity_Chart"
                            style="width:100%"/>
                    <canvas id="LTC_Result_Monies_Chart"
                            style="width:100%"/>
                </div>
				<br/>
                <a href="#"
                   onclick="download_table_as_csv('LTC_Result_Table');">Download
                    as CSV</a>
                <div class="left" id="ltc_result"></div>
            </div>
        </div>
    </div>
</div>
<!--LTC HTML ends here-->
<!--Spot HTML starts here-->
<div class="w3-container tabcontent" id="Spot">
	<div class="ltc_left w3-blue-grey" id="ltc_left" >
		<h5 class="left"> Please enter the following information and
			start the Simulation</h4>
		<br/>
		<div class="right">
			<label for="spot_rp" style="font-size:0.925em" >Retail Price</label>
			<input align="left" id="spot_rp" style="width: 60px;"type="text"/>
			<div class="center">
			<input  class="glossy-button" onClick="handle_His_Spot_Prices()" style="margin-top: 15px;"type="button"
				   value='View Historical Spot Prices'/>
			</div>	   
		</div>
		<div class="modal" id="spot_history_result_modal"
			 style="width:100%">
			<div class="spot-history-modal-content">
				<span class="close" id="spot_close">&times;</span>
				<div id="spot_history_result">
				</div>
			</div>
		</div>
		<br/>
		<div class="right">
			<label for="spot_mean" style="font-size:0.925em" >Mean quantity</label>
			<input align="left" id="spot_mean" style="width: 60px;"type="text"/>
		</div>
		<br/>
		<div class="right">
			<label for="spot_sd" style="font-size:0.925em" >Standard Deviation</label>
			<input align="left" id="spot_sd" style="width: 60px;" type="text"/>
		</div>
		<br/>
		<div class="right">
			<label for="spot_numIt" style="font-size:0.925em" > Number of Iterations to be
				performed</label>
			<input align="right" id="spot_numIt" style="width: 60px;"type="text"/>
		</div>
		<br/>
		<div class="center">
		<input class="glossy-button" onClick="handle_spot_Simulation()" align="center" type="button"
			   value='Run Simulation'/>
		</div>
		</div>
 
	<div class="ltc_right" id="ltc_right" >
		<div class="center" hidden id="spot_resultBody">
			<h4>Result of the Simulation
				<h4>
				<br/>
					<div id="spot_chartContent">
						<canvas id="Spot_Result_Quantity_Chart"
								style="width:100%"/>
						<canvas id="Spot_Result_Monies_Chart"
								style="width:100%"/>
					</div>
					<br/>
					<a href="#"
					   onclick="download_table_as_csv('Spot_Result_Table');">Download
						as CSV</a>
					<div class="center" id="spot_result"></div>

		</div>
	</div>
</div>

<!--Spot HTML ends here-->
<!--Long Term with Spot HTML starts here-->
<div class="w3-container tabcontent" id="LTC-Spot">

	<div class="ltc_left w3-blue-grey" id="ltc_left" >
	    <h5 class="left"> Please enter the following information and
        start
        the Simulation</h4>
    <br/>
    <div class="right">
        <label for="ltc_spot_wsp" style="font-size:0.925em" >Wholesale Price</label>
        <input align="left" id="ltc_spot_wsp" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_spot_rp" style="font-size:0.925em" >Retail Price</label>
        <input align="left" id="ltc_spot_rp" style="width: 60px;" type="text"/>
		<div class="center">
			<input  class="glossy-button" onClick="handle_His_ltc_Spot_Prices()" style="margin-top: 15px;" type="button"
               value='View Historical Spot Prices'/>
		</div>
        <div class="modal" id="ltc_spot_history_result_modal"
             ltc_spot-history-modal-content style="width:100%>
        <div class="
        ">
        <span class="close" id="ltc_spot_close">&times;</span>
        <div id="ltc_spot_history_result"/>
    </div>
</div>
</div>
<br/>
<div class="right">
    <label for="ltc_spot_salp" style="font-size:0.925em" > Salvage Price</label>
    <input align="left" id="ltc_spot_salp" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_spot_mean" style="font-size:0.925em" >Mean quantity</label>
    <input align="left" id="ltc_spot_mean" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_spot_sd" style="font-size:0.925em" > Standard Deviation</label>
    <input align="left" id="ltc_spot_sd" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_spot_orderQty" style="font-size:0.925em" >Order Quantity</label>
    <input align="left" id="ltc_spot_orderQty" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_spot_numIt" style="font-size:0.925em" > Number of Iterations to be
        performed</label>
    <input align="left" id="ltc_spot_numIt" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="center">
	<input class="glossy-button"  onClick="handle_LTC_Spot_Simulation()" type="button"
       value='Run Simulation'/>
</div>
</div>
<br/>
<div class="ltc_right" id="ltc_right" >
<div class="center" hidden id="ltc_spot_resultBody">
    <h4>Result of the Simulation
        <h4>
		<br/>
            <div id="ltc_spot_chartContent">
                <canvas id="LTC_Spot_Result_Quantity_Chart"
                        style="width:100%"/>
                <canvas id="LTC_Spot_Result_Monies_Chart"
                        style="width:100%"/>
            </div>
            <br/>
            <a href="#"
               onclick="download_table_as_csv('LTC_Spot_Result_Table');">Download
                as CSV</a>
            <div class="center" id="ltc_spot_result"></div>

</div>
</div>
</div>
</div>
<!-- Long Term with Spot HTML ends here-->

<!-- Options Contract starts here -->

<div class="w3-container tabcontent" id="Options">
<div class="ltc_left w3-blue-grey" id="ltc_left" >
    <h5 class="left"> Please enter the following information and start
        the Simulation</h4>
    <br/>
    <div class="right">
        <label for="options_uop" style="font-size:0.925em" >Unit Options Price</label>
        <input align="left" id="options_uop" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="options_uep" style="font-size:0.925em" >Unit Exercise Price</label>
        <input align="left" id="options_uep" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="options_rp" style="font-size:0.925em" >Retail Price</label>
        <input align="left" id="options_rp" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="options_mean" style="font-size:0.925em" >Mean quantity</label>
        <input align="left" id="options_mean" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="options_sd" style="font-size:0.925em" > Standard Deviation</label>
        <input align="left" id="options_sd" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="options_orderQty" style="font-size:0.925em" >Order Quantity for Options
            Procurement</label>
        <input align="left" id="options_orderQty" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="options_numIt" style="font-size:0.925em" > Number of Iterations to be
            performed</label>
        <input align="left" id="options_numIt" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="center">
        <input  class="glossy-button" onClick="handle_Options_Simulation()" type="button"
               value='Run Simulation'/>
    </div>
	</div>
    <br/>
	<div class="ltc_right" id="ltc_right" >
    <div class="center" hidden id="options_resultBody">
        <h4>Result of the Simulation
            <h4>
			<br/>
                <div id="options_chartContent">
                    <canvas id="Options_Result_Quantity_Chart"
                            style="width:100%"/>
                    <canvas id="Options_Result_Monies_Chart"
                            style="width:100%"/>
                </div>			
                <br/>
                <a href="#"
                   onclick="download_table_as_csv('Options_Result_Table');">Download
                    as CSV</a>
                <div class="center" id="options_result"></div>
	</div>
    </div>
</div>
<!-- Options Contract ends here -->
<!--LTC with Options HTML starts here-->
<div class="w3-container tabcontent" id="LTC-Options">
<div class="ltc_left w3-blue-grey" id="ltc_left" >
    <h5 class="left"> Please enter the following information and start
        the Simulation</h4>
    <br/>
    <div class="right">
        <label for="ltc_options_wsp" style="font-size:0.925em" >Wholesale Price</label>
        <input align="left" id="ltc_options_wsp" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_uop" style="font-size:0.925em" >Unit Options Price</label>
        <input align="left" id="ltc_options_uop" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_uep" style="font-size:0.925em" >Unit Exercise Price</label>
        <input align="left" id="ltc_options_uep" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_rp" style="font-size:0.925em" >Retail Price</label>
        <input align="left" id="ltc_options_rp" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_salp" style="font-size:0.925em" >Salvage Price</label>
        <input align="left" id="ltc_options_salp" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_mean" style="font-size:0.925em" >Mean quantity</label>
        <input align="left" id="ltc_options_mean" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_sd" style="font-size:0.925em" >Standard Deviation</label>
        <input align="left" id="ltc_options_sd" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_orderQty" style="font-size:0.925em" >Order Quantity for Long
            Term Contract</label>
        <input align="left" id="ltc_options_orderQty" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_procurementOrderQty" style="font-size:0.925em" >Order Quantity
            for Options Procurement</label>
        <input align="left" id="ltc_options_procurementOrderQty"
               style="width: 60px;"  type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_numIt" style="font-size:0.925em" > Number of Iterations to be
            performed</label>
        <input align="left" id="ltc_options_numIt" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="center">
        <input class="glossy-button"  onClick="handle_LTC_Options_Simulation()" type="button"
               value='Run Simulation'/>
    </div>
	</div>
    <br/>
	<div class="ltc_right" id="ltc_right" >
    <div class="center" hidden id="ltc_options_resultBody">
        <h4>Result of the Simulation
            <h4>
			<br/>
                <div id="ltc_options_chartContent">
                    <canvas id="LTC_Options_Result_Quantity_Chart"
                            style="width:100%"/>
                    <canvas id="LTC_Options_Result_Monies_Chart"
                            style="width:100%"/>
                </div>
                <br/>
                <a href="#"
                   onclick="download_table_as_csv('LTC_Options_Result_Table');">Download
                    as CSV</a>
                <div class="center" id="ltc_options_result"></div>

	</div>
    </div>
</div>
</div>
<!--LTC with Options HTML ends here-->

<!--LTC with Options and Spot HTML starts here-->
<div class="w3-container tabcontent" id="LTC-Options-Spot">
<div class="ltc_left w3-blue-grey" id="ltc_left" >
    <h5 class="left"> Please enter the following information and start
        the Simulation</h4>
    <br/>
    <div class="right">
        <label for="ltc_options_spot_wsp" style="font-size:0.925em" >Wholesale Price</label>
        <input align="left" id="ltc_options_spot_wsp" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_spot_uop" style="font-size:0.925em" > Unit Options Price</label>
        <input align="left" id="ltc_options_spot_uop" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_spot_uep" style="font-size:0.925em" >Unit Exercise
            Price</label>
        <input align="left" id="ltc_options_spot_uep" style="width: 60px;" type="text"/>
    </div>
    <br/>
    <div class="right">
        <label for="ltc_options_spot_rp" style="font-size:0.925em" > Retail Price</label>
        <input align="left" id="ltc_options_spot_rp" style="width: 60px;" type="text"/>
		<div class="center">
        <input  class="glossy-button" onClick="handle_His_ltc_Options_Spot_Prices()" style="margin-top: 15px;" type="button"
               value='View Historical Spot Prices'/>
		</div>
        <div class="modal" id="ltc_options_spot_history_result_modal"
             ltc_options_spot-history-modal-content style="width:100%>
        <div class="
        ">
        <span class="close" id="ltc_options_spot_close">&times;</span>
        <div id="ltc_options_spot_history_result"/>
    </div>
</div>
<br/>

<div class="right">
    <label for="ltc_options_spot_salp" style="font-size:0.925em" > Salvage Price</label>
    <input align="left" id="ltc_options_spot_salp" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_options_spot_mean" style="font-size:0.925em" > Mean quantity</label>
    <input align="left" id="ltc_options_spot_mean" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_options_spot_sd" style="font-size:0.925em" >  Standard Deviation</label>
    <input align="left" id="ltc_options_spot_sd" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_options_spot_orderQty" style="font-size:0.925em" >Order Quantity for
        Long
        Term Contract</label>
    <input align="left" id="ltc_options_spot_orderQty" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_options_spot_procurementOrderQty" style="font-size:0.925em" > Order
        Quantity
        for Options Procurement</label>
    <input align="left" id="ltc_options_spot_procurementOrderQty"
           style="width: 60px;" type="text"/>
</div>
<br/>
<div class="right">
    <label for="ltc_options_spot_numIt" style="font-size:0.925em" > Number of Iterations
        to be
        performed</label>
    <input align="left" id="ltc_options_spot_numIt" style="width: 60px;" type="text"/>
</div>
<br/>
<div class="center">
    <input  class="glossy-button" onClick="handle_LTC_Options_Spot_Simulation()" type="button"
           value='Run Simulation'/>
</div>
</div>
</div>
<br/>
<div class="w3-container tabcontent" id="ltc_right" >
<div class="center" hidden id="ltc_options_spot_resultBody">
    <h4>Result of the Simulation
        <h4>
		<br/>
		    <div id="ltc_options_spot_chartContent">
                <canvas id="LTC_Options_Spot_Result_Quantity_Chart"
                        style="width:100%"/>
                <canvas id="LTC_Options_Spot_Result_Monies_Chart"
                        style="width:100%"/>
            </div>
            <br/>
            <a href="#"
               onclick="download_table_as_csv('LTC_Options_Spot_Result_Table');">Download
                as CSV</a>
            <div class="center" id="ltc_options_spot_result"></div>

</div>
</div>
</div>
</div>
<!--LTC with Options and Spot HTML ends here-->

<!--RS HTML starts here-->
<div class="w3-container tabcontent" id="RS">
<div class="ltc_left w3-blue-grey" id="ltc_left" >
    <div id="rs_left" >
        <h5 class="left"> Please enter the following information and
            start the Simulation</h4>
        <br/>
        <div class="right">
            <label for="rs_cp" style="font-size:0.925em" >Cost Price for the supplier</label>
            <input align="left" id="rs_cp" style="width: 60px;"
                   type="text"/>
        </div>
		<br/>
        <div class="right">
            <label for="rs_wsp" style="font-size:0.925em" >Wholesale Price</label>
            <input align="left" id="rs_wsp" style="width: 60px;"
                   type="text"/>
        </div>
        <br/>
        <div class="right">
            <label for="rs_rp" style="font-size:0.925em" >Retail Price</label>
            <input align="left" id="rs_rp" style="width: 60px;"
                   type="text"/>
        </div>
        <br/>
        <div class="right">
            <label for="rs_salp" style="font-size:0.925em" > Salvage Price</label>
            <input align="left" id="rs_salp" style="width: 60px;"
                   type="text"/>
        </div>
        <br/>
        <div class="right">
            <label for="rs_rev_percent" style="font-size:0.925em" > Percentage of Revenue
                retained by the retailer </label>
            <input align="left" id="rs_rev_percent" style="width: 60px;"
                   type="text"/>
            <br/>
            <div>
                <input id="rs_rev_percent_slider_min" style="width: 60px;"
                       type="text" value="0" readonly />
                <input class="slider" id="rs_rev_percent_slider" max="100"
                       min="0"
                       style="width: 200px;"
                       type="range" value="0">
                <input id="rs_rev_percent_slider_max" style="width: 60px; margin-top: 15px"
                       type="text" readonly />
            </div>
        </div>
        <br/>
        <div class="right">
            <label for="rs_mean" style="font-size:0.925em" >Mean quantity</label>
            <input align="left" id="rs_mean" style="width: 60px;"
                   type="text"/>
        </div>
        <br/>
        <div class="right">
            <label for="rs_sd" style="font-size:0.925em" > Standard Deviation (Enter or Use Slider)
                </label>
            <input align="left" id="rs_sd" style="width: 60px;"
                   type="text"/>
            <br/>
            <div>
                <input id="rs_sd_slider_min" style="width: 60px;"
                       type="text" value="0" readonly />
                <input class="slider" id="rs_sd_slider" max="999"
                       min="0"
                       style="width: 200px;"
                       type="range" value="0">
                <input id="rs_sd_slider_max" style="width: 60px; margin-top: 15px"
                       type="text" readonly />
            </div>
        </div>
        <br/>
        <div class="right">
            <label for="rs_orderQty" style="font-size:0.925em" >Order Quantity</label>
            <input align="left" id="rs_orderQty" style="width:60px;"
                   type="text"/>
        </div>
        <br/>
        <div class="right">
            <label for="rs_numIt" style="font-size:0.925em" > Number of Iterations to be
                performed</label>
            <input align="left" id="rs_numIt" style="width: 60px;"
                   type="text"/>
        </div>
        <br/>
        <div class="center">
            <input  class="glossy-button" onClick="handle_RS_Simulation()" type="button"
                   value='Run Simulation'/>
        </div>
	</div>	
    </div>
<div class="ltc_right" id="ltc_right" >	
	<div class="center" hidden id="rs_resultBody">
    <h4>Result of the Simulation
        <h4>
            <br/>
			<div id="rs_chartContent">
                <canvas id="RS_Result_Quantity_Chart"
                        style="width:100%"/>
                <canvas id="RS_Result_Monies_Chart"
                        style="width:100%"/>
            </div>
			<br/>
            <a href="#"
               onclick="download_table_as_csv('RS_Result_Table');">Download
                as CSV</a>
            <div class="center" id="rs_result"></div>
            
	</div>
	</div>
</div>
</div>
<!--RS HTML ends here-->
</body>

<script>

//For LTC Start
    var ltc_sd_slider = document.getElementById("ltc_sd_slider");
    var ltc_sd=document.getElementById("ltc_sd");
    var ltc_sd_slider_max=document.getElementById("ltc_sd_slider_max");

    ltc_sd_slider_max.value = ltc_sd_slider.max;

    ltc_sd_slider.oninput = function() {
        ltc_sd.value = this.value;
        handle_LTC_Simulation();
    }
ltc_sd.oninput = function() {
  ltc_sd_slider.value = this.value;
}
ltc_sd_slider_max.oninput = function(){

ltc_sd_slider.max = ltc_sd_slider_max.value;
}
ltc_sd_slider_min.oninput = function(){

ltc_sd_slider.min = ltc_sd_slider_min.value;
}

//For LTC End

//For RS Start
    var rs_sd_slider = document.getElementById("rs_sd_slider");
    var rs_sd=document.getElementById("rs_sd");
    var rs_sd_slider_max=document.getElementById("rs_sd_slider_max");

    rs_sd_slider_max.value = rs_sd_slider.max;

    rs_sd_slider.oninput = function() {
        rs_sd.value = this.value;
        handle_RS_Simulation();
    }
rs_sd.oninput = function() {
  rs_sd_slider.value = this.value;
}
rs_sd_slider_max.oninput = function(){

rs_sd_slider.max = rs_sd_slider_max.value;
}
rs_sd_slider_min.oninput = function(){

rs_sd_slider.min = rs_sd_slider_min.value;
}

//
 var rs_rev_percent_slider = document.getElementById("rs_rev_percent_slider");
    var rs_rev_percent=document.getElementById("rs_rev_percent");
    var rs_rev_percent_slider_max=document.getElementById("rs_rev_percent_slider_max");

    rs_rev_percent_slider_max.value = rs_rev_percent_slider.max;

    rs_rev_percent_slider.oninput = function() {
        rs_rev_percent.value = this.value;
        handle_RS_Simulation();
    }
rs_rev_percent.oninput = function() {
  rs_rev_percent_slider.value = this.value;
}
rs_rev_percent_slider_max.oninput = function(){

rs_rev_percent_slider.max = rs_rev_percent_slider_max.value;
}
rs_rev_percent_slider_min.oninput = function(){

rs_rev_percent_slider.min = rs_rev_percent_slider_min.value;
}

//For RS End

</script>

</html>